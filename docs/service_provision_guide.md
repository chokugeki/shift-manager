# サービス提供・デプロイ手順書

本ドキュメントでは、本アプリケーション（Next.js製）を第三者にサービスとして提供するためのサーバー選定、およびデプロイ（公開）手順について解説します。

## 1. サーバーサービスの選定（日本国内向け）

本プロジェクトは `output: 'export'` 設定により静的サイトとしてビルドされるため、Node.jsが動作する高価なサーバーは必須ではありません。一般的なWebホスティングサービスで動作します。

### 推奨プラン A: Vercel (最も推奨)
Next.jsの開発元が提供するホスティングサービスです。設定が最も簡単で、パフォーマンスも最適化されています。
- **プラン**: Pro Plan ($20/月/ユーザー)
  - ※商用利用（第三者へのサービス提供）の場合、無料のHobbyプランは利用規約上推奨されません。
- **メリット**:
  - GitHubと連携し、コードを保存するだけで自動更新される。
  - 東京リージョン (HND1) があり、日本国内からのアクセスも高速。
  - 設定不要でHTTPS（鍵マーク）化される。

### 推奨プラン B: AWS (Amazon Web Services)
拡張性と信頼性を重視する場合の選択肢です。
- **構成**: S3 (ストレージ) + CloudFront (配信)
- **コスト**: 従量課金（アクセス数によるが、小規模なら月額数百円〜）
- **メリット**:
  - 業界標準の信頼性。
  - 細かいアクセス制御やセキュリティ設定が可能。

### 推奨プラン C: 国内レンタルサーバー (Xserver, Sakura等)
すでに契約済みのサーバーがある場合や、日本の会社との契約が必須の場合。
- **プラン**: 一般的なスタンダードプラン（月額1,000円前後〜）
- **条件**: 静的ファイル（HTML/CSS/JS）のアップロードが可能であること。
- **メリット**: 日本語サポート、請求書払いなどが容易。

---

## 2. ビルドとデプロイの手法

### 手法 A: GitHub連携による自動デプロイ (推奨)
**ツール**: Git, GitHub, Vercel/AWS Amplify
**場所**: クラウド上 (CI/CD)

最も現代的で安全な方法です。手元のパソコンでコマンドを打つ必要は最初だけです。
1. 手元のコードをGitHubにプッシュ（アップロード）する。
2. サーバー側（Vercel等）が変更を検知し、自動でビルド・公開する。

### 手法 B: 手動ビルド & アップロード
**ツール**: PowerShell, FTPソフト (FileZilla等)
**場所**: ローカルPC (PowerShell)

Gitを使わず、手作業で公開する方法です。レンタルサーバー（プランC）を使う場合に適しています。

---

## 3. 具体的な作業手順

ここでは、**「手法B: 手動ビルド & アップロード」**（レンタルサーバー向け）と、**「手法A: Vercel」**（モダンな手法）の2パターンを解説します。

### パターン1: 手動ビルド手順 (PowerShell使用)

レンタルサーバー（Xserver等）に公開する場合の手順です。

#### 1. ビルドの実行
PowerShellを開き、プロジェクトのフォルダで以下のコマンドを実行します。

```powershell
# 依存関係のインストール（初回のみ）
npm install

# 本番用ファイルの生成
npm run build
```

成功すると、プロジェクトフォルダ内に `out` というフォルダが作成されます。この中に公開用のファイル一式（HTML, CSS, JS）が入っています。

#### 2. サーバーへのアップロード
1. FTPソフト（FileZilla, WinSCPなど）を起動し、契約したサーバーに接続します。
2. サーバーの公開ディレクトリ（例: `public_html` や `www`）を開きます。
3. 先ほど作成された `out` フォルダの中身（`out`フォルダそのものではなく、中のファイルすべて）を、サーバーの公開ディレクトリにドラッグ＆ドロップでアップロードします。

#### 3. 確認
ブラウザでサーバーのURL（例: `https://your-domain.com`）にアクセスし、表示を確認します。

---

### パターン2: Vercelによる自動デプロイ手順

#### 1. GitHubへの登録
1. [GitHub](https://github.com/)のアカウントを作成します。
2. PowerShellで以下のコマンドを使い、コードをGitHubにアップロードします。

```powershell
# Gitの初期化（初回のみ）
git init
git add .
git commit -m "Initial commit"

# GitHubで作成したリポジトリのURLを設定
git remote add origin https://github.com/ユーザー名/リポジトリ名.git

# アップロード
git push -u origin main
```

#### 2. Vercelの設定
1. [Vercel](https://vercel.com/)のアカウントを作成します。
2. "Add New..." -> "Project" を選択します。
3. "Import Git Repository" で先ほどのGitHubリポジトリを選択します。
4. 設定画面が表示されますが、Next.jsプロジェクトであれば通常は設定変更不要です。"Deploy" をクリックします。
5. 数分待つとビルドが完了し、自動的にURLが発行されて公開されます。

## 4. 運用・保守について

- **ドメイン**: サービスとして提供する場合、独自ドメイン（例: `shift-manager.jp`）の取得を強く推奨します。Vercelやレンタルサーバーの管理画面から設定可能です。
- **更新**:
    - **パターン1**: 修正するたびに `npm run build` してFTPで上書きアップロードします。
    - **パターン2**: 修正して `git push` するだけで、自動的に新しい版が公開されます。
